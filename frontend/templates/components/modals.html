<!-- File Upload Modal -->
<div class="modal fade" id="fileUploadModal" tabindex="-1" aria-labelledby="fileUploadModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="fileUploadModalLabel">
                    <i class="fas fa-cloud-upload-alt me-2"></i>Upload Your Resume
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Upload Area -->
                <div class="upload-section">
                    <div class="file-drop-zone-modal" id="fileDropZoneModal">
                        <div class="drop-zone-content-modal">
                            <div class="upload-icon mb-3">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h5>Drag & drop your resume here</h5>
                            <p class="text-muted mb-3">or click to browse files</p>
                            <button type="button" class="btn btn-primary" id="browseFilesBtn">
                                <i class="fas fa-folder-open me-2"></i>Browse Files
                            </button>
                            <input type="file" id="resumeFileInput" accept=".pdf,.doc,.docx,.txt" class="d-none">
                        </div>
                        
                        <!-- Upload Progress -->
                        <div class="upload-progress-modal d-none">
                            <div class="text-center mb-3">
                                <div class="upload-spinner">
                                    <i class="fas fa-cog fa-spin fa-2x text-primary"></i>
                                </div>
                            </div>
                            <h6 class="text-center">Processing your resume...</h6>
                            <div class="progress mb-3">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" id="uploadProgressBar" style="width: 0%"></div>
                            </div>
                            <div class="upload-status text-center">
                                <small class="text-muted" id="uploadStatusText">Uploading file...</small>
                            </div>
                        </div>
                        
                        <!-- Success State -->
                        <div class="upload-success d-none">
                            <div class="text-center">
                                <div class="success-icon mb-3">
                                    <i class="fas fa-check-circle fa-3x text-success"></i>
                                </div>
                                <h5>Upload Successful!</h5>
                                <p class="text-muted">Your resume has been analyzed successfully.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- File Requirements -->
                <div class="file-requirements mt-4">
                    <h6><i class="fas fa-info-circle me-2 text-info"></i>File Requirements</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>PDF, DOC, or DOCX format</li>
                                <li><i class="fas fa-check text-success me-2"></i>Maximum file size: 5MB</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>Clear text and formatting</li>
                                <li><i class="fas fa-check text-success me-2"></i>Recent and up-to-date content</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Tips -->
                <div class="upload-tips mt-4">
                    <div class="alert alert-info">
                        <h6><i class="fas fa-lightbulb me-2"></i>Tips for better analysis:</h6>
                        <ul class="mb-0">
                            <li>Include your skills, experience, and education clearly</li>
                            <li>Use standard resume formatting</li>
                            <li>Ensure all text is readable (avoid images with text)</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary d-none" id="analyzeBtn">
                    <i class="fas fa-brain me-2"></i>Analyze Resume
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Career Exploration Modal -->
<div class="modal fade" id="careerExplorationModal" tabindex="-1" aria-labelledby="careerExplorationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="careerExplorationModalLabel">
                    <i class="fas fa-compass me-2"></i>Explore Career Paths
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Career Categories -->
                <div class="career-categories mb-4">
                    <h6>Browse by Category</h6>
                    <div class="row">
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="technology">
                                <i class="fas fa-laptop-code"></i>
                                <span>Technology</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="healthcare">
                                <i class="fas fa-heartbeat"></i>
                                <span>Healthcare</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="finance">
                                <i class="fas fa-chart-line"></i>
                                <span>Finance</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="education">
                                <i class="fas fa-graduation-cap"></i>
                                <span>Education</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="marketing">
                                <i class="fas fa-bullhorn"></i>
                                <span>Marketing</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="design">
                                <i class="fas fa-palette"></i>
                                <span>Design</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="engineering">
                                <i class="fas fa-cogs"></i>
                                <span>Engineering</span>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-3">
                            <div class="category-card" data-category="business">
                                <i class="fas fa-briefcase"></i>
                                <span>Business</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Career Results -->
                <div class="career-results" id="careerResults">
                    <div class="text-center py-5">
                        <i class="fas fa-search fa-3x text-muted mb-3"></i>
                        <h5>Select a category to explore careers</h5>
                        <p class="text-muted">Choose from the categories above to see relevant career paths and opportunities.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Loading Spinner Component -->
<div class="loading-spinner d-none" id="globalLoadingSpinner">
    <div class="spinner-container">
        <div class="brain-spinner">
            <i class="fas fa-brain"></i>
        </div>
        <h5>AI is thinking...</h5>
        <p class="loading-message">Processing your request</p>
    </div>
</div>

<!-- Notification Toast Container -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;" id="toastContainer">
    <!-- Toasts will be dynamically added here -->
</div>

<!-- Floating Action Buttons -->
<div class="floating-actions">
    <!-- Help Button -->
    <div class="fab-container">
        <button class="fab-button" id="helpFab" data-bs-toggle="tooltip" data-bs-placement="left" title="Get Help">
            <i class="fas fa-question"></i>
        </button>
    </div>
    
    <!-- Quick Upload Button -->
    <div class="fab-container">
        <button class="fab-button fab-secondary" id="quickUploadFab" data-bs-toggle="modal" data-bs-target="#fileUploadModal" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick Upload">
            <i class="fas fa-upload"></i>
        </button>
    </div>
</div>

<!-- Skills Assessment Wizard -->
<div class="modal fade" id="skillsAssessmentModal" tabindex="-1" aria-labelledby="skillsAssessmentModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="skillsAssessmentModalLabel">
                    <i class="fas fa-graduation-cap me-2"></i>Skills Assessment
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Assessment Steps -->
                <div class="assessment-steps">
                    <div class="step step-active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-title">Basic Info</span>
                    </div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-title">Technical Skills</span>
                    </div>
                    <div class="step" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-title">Soft Skills</span>
                    </div>
                    <div class="step" data-step="4">
                        <span class="step-number">4</span>
                        <span class="step-title">Results</span>
                    </div>
                </div>
                
                <!-- Assessment Content -->
                <div class="assessment-content mt-4">
                    <!-- Step 1: Basic Info -->
                    <div class="assessment-step active" id="step1">
                        <h6>Tell us about yourself</h6>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Current Role</label>
                                <input type="text" class="form-control" placeholder="e.g., Software Developer">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Experience Level</label>
                                <select class="form-select">
                                    <option value="">Select level</option>
                                    <option value="entry">Entry Level (0-2 years)</option>
                                    <option value="mid">Mid Level (2-5 years)</option>
                                    <option value="senior">Senior Level (5-10 years)</option>
                                    <option value="expert">Expert Level (10+ years)</option>
                                </select>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label">Industry</label>
                                <select class="form-select">
                                    <option value="">Select industry</option>
                                    <option value="technology">Technology</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="finance">Finance</option>
                                    <option value="education">Education</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional steps would be implemented here -->
                    <div class="assessment-step" id="step2">
                        <h6>Rate your technical skills</h6>
                        <p class="text-muted">Select your skill level for each area (1 = Beginner, 5 = Expert)</p>
                        <!-- Skill rating components would go here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="prevStepBtn" style="display: none;">Previous</button>
                <div class="flex-grow-1"></div>
                <button type="button" class="btn btn-primary" id="nextStepBtn">Next</button>
            </div>
        </div>
    </div>
</div>

<style>
/* Modal Styles */
.file-drop-zone-modal {
    border: 2px dashed #dee2e6;
    border-radius: 12px;
    padding: 3rem 2rem;
    text-align: center;
    transition: all 0.3s ease;
    background: #f8f9fa;
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.file-drop-zone-modal:hover {
    border-color: #007bff;
    background: #e3f2fd;
    cursor: pointer;
}

.file-drop-zone-modal.dragover {
    border-color: #007bff;
    background: #e3f2fd;
    transform: scale(1.02);
}

.upload-icon i {
    font-size: 4rem;
    color: #6c757d;
}

.file-drop-zone-modal:hover .upload-icon i {
    color: #007bff;
    animation: bounce 0.6s ease;
}

.category-card {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.category-card:hover {
    background: #007bff;
    color: white;
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 123, 255, 0.15);
}

.category-card i {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.category-card.selected {
    background: #007bff;
    color: white;
    border-color: #007bff;
}

/* Floating Action Buttons */
.floating-actions {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 1050;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.fab-button {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: none;
    background: #007bff;
    color: white;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    transition: all 0.3s ease;
    cursor: pointer;
}

.fab-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
}

.fab-secondary {
    background: #28a745;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
}

.fab-secondary:hover {
    box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
}

/* Loading Spinner */
.loading-spinner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
}

.spinner-container {
    text-align: center;
    color: white;
}

.brain-spinner {
    font-size: 4rem;
    animation: brainPulse 1.5s ease-in-out infinite;
    margin-bottom: 1rem;
}

@keyframes brainPulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.8;
    }
}

/* Assessment Steps */
.assessment-steps {
    display: flex;
    justify-content: space-between;
    margin-bottom: 2rem;
    position: relative;
}

.assessment-steps::before {
    content: '';
    position: absolute;
    top: 20px;
    left: 10%;
    right: 10%;
    height: 2px;
    background: #dee2e6;
    z-index: 1;
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    z-index: 2;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #dee2e6;
    color: #6c757d;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.step.step-active .step-number {
    background: #007bff;
    color: white;
}

.step.step-completed .step-number {
    background: #28a745;
    color: white;
}

.step-title {
    font-size: 0.875rem;
    text-align: center;
}

.assessment-step {
    display: none;
    animation: fadeInUp 0.5s ease;
}

.assessment-step.active {
    display: block;
}

/* Responsive */
@media (max-width: 768px) {
    .floating-actions {
        bottom: 1rem;
        right: 1rem;
    }
    
    .fab-button {
        width: 48px;
        height: 48px;
        font-size: 1rem;
    }
    
    .category-card {
        padding: 1rem;
    }
    
    .category-card i {
        font-size: 1.5rem;
    }
}
</style>